<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxdir="http://nuxeo.org/nxdirectory"
  xmlns:nxu="http://nuxeo.org/nxweb/util">
<c:if test="false">
  This template is deprecated.
  XXX AT: wrap table in another table to avoid table reset,
  see NXP-656 + NXP-689
</c:if>

<h:dataTable value="#{editableListBean.dummyList}" rows="1">
<h:column>

<h:dataTable
  class="dataInput" var="field"
  value="#{documentActions.changeableDocumentType.layout}"
  columnClasses="labelColumn, fieldColumn">
  <h:column>
    <h:outputText value="${messages[field.displayLabel]}"
      styleClass="#{nxu:test(field.required, 'required', '')}" />
  </h:column>

  <h:column>
    <h:inputText id="h_inputText"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      class="dataInputText"
      required="${field.required}"
      rendered="${field.jsfComponent=='h:inputText'}" />
    <h:message styleClass="errorMessage" for="h_inputText" />

    <h:inputTextarea id="h_inputTextarea"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      required="${field.required}"
      class="dataInputText"
      rendered="${field.jsfComponent=='h:inputTextarea'}" />
    <h:message styleClass="errorMessage" for="h_inputTextarea" />

          <nxu:inputDateTime
             value="#{changeableDocument[field.schemaName][field.fieldName]}"
             format="#{nxu:basicDateFormater()}"
             id="t_inputCalendar"
             rendered="${field.jsfComponent=='t:inputCalendar'}"
             required="${field.required}"
           />


    <h:message styleClass="errorMessage" for="t_inputCalendar" />

    <nxu:editor id="nxeditor"
      rendered="${field.jsfComponent=='nxu:editor'}"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      required="${field.required}" />

    <nxu:inputFile id="t_inputFileUpload"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      filename="#{changeableDocument.file.filename}"
      editFilename="false"
      rendered="${field.jsfComponent=='t:inputFileUpload'}">
    </nxu:inputFile>
    <h:message styleClass="errorMessage" for="t_inputFileUpload" />

    <nxdir:selectOneListbox id="nxdir_selectOneListbox"
      rendered="${field.jsfComponent=='nxdir:selectOneListbox'}"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      directoryName="#{field.directory}"
      required="${field.required}"
      displayIdAndLabel="${field.displayIdAndLabel}"/>
    <h:message styleClass="errorMessage" for="nxdir_selectOneListbox" />

    <nxdir:selectManyListbox id="nxdir_selectManyListbox"
      rendered="${field.jsfComponent=='nxdir:selectManyListbox'}"
      value="#{changeableDocument[field.schemaName][field.fieldName]}"
      directoryName="#{field.directory}"
      required="${field.required}" />
    <h:message styleClass="errorMessage" for="nxdir_selectManyListbox" />

  </h:column>
</h:dataTable>

</h:column>
</h:dataTable>

<c:if test="#{!hideVersioningPanel}">
  <c:if test="false">
    The include below shouldn't be there and is only kept for backward compatibility
  </c:if>
  <ui:include src="/incl/document_versioning.xhtml" />
</c:if>

</div>
