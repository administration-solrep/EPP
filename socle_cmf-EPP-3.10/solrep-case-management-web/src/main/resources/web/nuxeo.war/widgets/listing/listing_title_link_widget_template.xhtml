<f:subview id="#{widget.id}"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:h="http://java.sun.com/jsf/html">

  <div class="popupTarget" docRef="#{field_1}">

      <h:commandLink value="#{nxd:titleOrId(row.data)}"
        action="#{cmMailboxActions.openDraft(field_0.cmdoc.defaultCaseId)}" rendered="#{field_0.hasFacet('CaseItem')}"/>

    <nxd:restDocumentLink document="#{field_0}"
      rendered="#{not field_0.hasFacet('CaseItem')}">
      <span id="title_#{field_1}" title="#{field_2}">
        #{nxd:titleOrId(field_0)}
      </span>
    </nxd:restDocumentLink>

    <nxd:restDocumentLink document="#{field_0}"
      newConversation="true" target="_tab">
      <img src="icons/external.gif" style="vertical-align:middle"
        alt="#{messages['permalink.newTab']}"
        title="#{messages['permalink.newTab']}"/>
    </nxd:restDocumentLink>

    <nxh:outputLink
      rendered="#{field_0.hasSchema(widget.properties.file_schema) and !empty field_3}"
      value="#{nxd:fileUrl('downloadFile', field_0, widget.properties.file_property_name, field_4)}">
      <nxh:graphicImage value="/icons/download.png" style="vertical-align:middle"
        title="#{field_4}" alt="#{field_4}" />
    </nxh:outputLink>

  </div>

</f:subview>
